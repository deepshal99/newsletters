[build]
  command = "npm install"
  publish = "public"
  functions = "netlify/functions"





[dev]
  command = "npm run dev"
  port = 3000
  publish = "public"
  functions = "netlify/functions"

[[redirects]]
  from = "/subscribe"
  to = "/.netlify/functions/subscribe"
  status = 200

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"
  
  # Increase function timeout to 30 seconds (max allowed for Netlify functions)
  [functions.newsletter]
    timeout = 30

  [functions.schedules]
    [functions.schedules.newsletter]
      cron = "05 10 * * *"   # 10:05 UTC (3:35 PM IST)



[[redirects]]
  from = "/view"
  to = "/.netlify/functions/view"
  status = 200

[[redirects]]
  from = "/*"
  to = "/index.html"
  status = 200